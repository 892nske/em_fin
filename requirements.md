# ToDoアプリ 要件定義書

- **文書名**: ToDoアプリ 要件定義書（単一ページ／ローカル保存）
- **版**: v0.1
- **作成日**: 2025-09-15
- **作成者**: プロダクトマネージャー

> 本書は「技術的な設計の観点（具体的なフレームワーク、ライブラリ、アーキテクチャ）」を含まない**ビジネス／プロダクト要件**の定義書です。

---

## 1. 目的
- 単一ページで完結する個人向けタスク管理（ToDo）アプリを提供する。
- タスクに**優先度**、**期限**、**カテゴリ**を付与し、**分類・絞り込み・並び替え**を通じて日々の実行を支援する。
- 外部サーバや外部DBを用いず、**ユーザー端末上のみ**でデータを保持・利用できる安心感と軽快な操作性を提供する。

## 2. スコープ
- **対象**: 個人利用。ログインや複数端末同期は対象外。
- **画面構成**: 単一ページ（ダッシュボード画面）で完結。必要に応じてモーダル／パネルで操作。
- **データ保存**: ユーザー端末ローカル領域のみ。

## 3. 利用者像（ペルソナ）
- 20〜50代の知的労働従事者・学生・主婦/主夫。
- タスク量は1日10〜50件程度。スマホ・PCの両方を利用。
- 外出時も閲覧・追記したいが、データは端末内で完結したい。

## 4. ゴール
- 1ページで**素早く登録→分類→実行→完了**まで回せる。
- 今日や今週のやるべきことが**優先度・期限**で自然に浮き上がる。
- データはブラウザを閉じても端末内に**自動保存**される。

## 5. 用語定義
- **タスク**: 行うべき作業の最小単位。
- **優先度**: 重要度／緊急度を表す段階値（5段階を標準）。
- **期限**: 期日の日時。日付のみの指定も可。
- **カテゴリ**: 任意のグループ名やタグ（例: 仕事、家庭、学習）。
- **ステータス**: 未着手／進行中／完了。

## 6. ユーザーストーリー（MoSCoW）
**Must**（必須）
1. ユーザーとして、タスクを**追加・編集・削除**できるようにしたい。
2. ユーザーとして、タスクに**優先度（5段階）**を付けたい。
3. ユーザーとして、タスクに**期限（日付/任意で時刻）**を設定したい。
4. ユーザーとして、タスクに**カテゴリ**を付けて分類したい。
5. ユーザーとして、**優先度・期限・カテゴリ・ステータス**で**並び替え／絞り込み**したい。
6. ユーザーとして、タスクを**完了**にでき、**未完了**へ戻せるようにしたい。
7. ユーザーとして、データが**端末内に自動保存**され、再訪時に復元されていてほしい。
8. ユーザーとして、**単一ページ**で主要操作が完結してほしい。

**Should**（優先）
9. ユーザーとして、**検索**（タイトル・説明・カテゴリ）でタスクを見つけたい。
10. ユーザーとして、**期日が近い順／遅延（期限超過）**を一目で把握したい。
11. ユーザーとして、**一括操作**（選択したタスクのステータス変更、削除）がしたい。
12. ユーザーとして、**ソート条件・フィルタ条件**を**保持**して再訪時に再現してほしい。

**Could**（あれば嬉しい）
13. ユーザーとして、**カテゴリの色**や表示順をカスタマイズしたい。
14. ユーザーとして、タスク一覧を**印刷／端末ファイルにエクスポート**（例: JSON）したい。
15. ユーザーとして、**キーボード操作**で高速に登録・移動したい。

**Won’t (今回対象外)**
- 複数端末同期／共有、マルチユーザー、通知配信、外部サービス連携。

## 7. 画面要件（単一ページ）
### 7.1 ヘッダー領域
- アプリ名、今日の日時表示。
- 検索ボックス（Should）。

### 7.2 タスク入力パネル（常時表示 or 展開式）
- 入力項目: タイトル（必須）、説明（任意）、優先度（必須：1〜5）、期限（日付/任意で時刻）、カテゴリ（既存選択＋新規追加可）、ステータス（初期は未着手）。
- アクション: 追加、クリア、（ショートカット登録：Could）。
- バリデーション: 必須項目未入力、期限の過去日扱い、タイトル文字数上限。

### 7.3 フィルタ／ソートバー
- フィルタ: ステータス、カテゴリ（複数選択可）、期限状態（本日、今週、期限超過、期限なし）。
- ソート: 優先度降順、期限昇順、作成日、更新日、タイトル。
- 表示モード: すべて／今日／今週（Should）。

### 7.4 タスク一覧
- 各行に主要情報（タイトル、カテゴリ、優先度、期限、ステータス）。
- 行操作: 完了切替、編集、削除、ドラッグによる並び替え（Could）。
- 遅延タスクは視覚的に強調（例: アイコンやラベル）。

### 7.5 カテゴリ管理（簡易）
- 追加、名称変更、削除（未使用カテゴリのみ削除可）。
- 表示順・色設定（Could）。

### 7.6 フッター
- タスク件数の要約（総数、未完了、今日期限、遅延）。
- 印刷／エクスポート（Could）。

## 8. 機能要件
### 8.1 タスクCRUD
- 追加: 必須項目が満たされていること。追加後は一覧先頭または選択ソート優先に従う。
- 編集: 既存タスクの全項目を更新可能。更新日時を反映。
- 削除: 単体削除／一括削除（Should）。削除前に確認。

### 8.2 ステータス管理
- ステータス: 未着手→進行中→完了。完了から未着手・進行中へ戻せる。
- 完了時は完了日時を自動付与（論理項目）。

### 8.3 優先度/期限/カテゴリ
- 優先度: 1（低）〜5（高）。既定値は3。
- 期限: 日付必須ではない。時刻は任意。期限超過の定義: 現在日時 > 期限。
- カテゴリ: 任意文字列。既存から選択 or 新規作成。

### 8.4 並び替え／絞り込み／検索
- 並び替えは単一キー指定（多段ソートは対象外）。
- フィルタは複合条件可（カテゴリ×ステータス×期限状態など）。
- 検索はタイトル・説明・カテゴリ名を対象（部分一致、Should）。

### 8.5 一括操作（Should）
- チェックボックスで複数選択し、完了化／未完了化／削除。

### 8.6 設定保持（Should）
- ソート条件、フィルタ条件、表示モードをユーザー端末に保存し再訪時に再現。

### 8.7 印刷／エクスポート（Could）
- 現在の一覧を印刷用レイアウトで出力。
- エクスポートは端末ファイルとして保存（インポートは今回対象外）。

## 9. データ要件（論理モデル）
- **タスク**
  - id: 内部識別子（表示不要）
  - title: 1〜120文字、必須
  - description: 0〜1,000文字、任意
  - priority: 整数（1〜5）、必須、既定=3
  - dueDate: 日付（＋任意時刻）
  - category: 0〜40文字の任意文字列、複数不可（タグ1つ想定）
  - status: enum（未着手｜進行中｜完了）、既定=未着手
  - createdAt: 作成日時
  - updatedAt: 更新日時
  - completedAt: 完了日時（完了時のみ）
- **カテゴリ**（任意）
  - name: 1〜40文字、重複不可
  - color: 任意（Could）
  - order: 表示順（整数、Could）

> 注: 本章は物理的な保存方式やスキーマ定義ではなく、**論理項目**と制約のみを示す。

## 10. バリデーション／エラー要件
- 入力必須: タイトル、優先度。
- 文字数上限違反時はエラーメッセージ表示。
- 期限が現実的でない形式の場合はエラー。
- 削除・一括削除・一括完了には確認ダイアログ。
- エラー文言はユーザー視点で簡潔に（例: 「タイトルは必須です」）。

## 11. アクセシビリティ要件
- キーボードのみで主要操作が可能（フォーカス可視、操作順序が自然）。
- スクリーンリーダーで主要UI要素が意味的に伝わるラベルを持つ。
- 色覚多様性に配慮（状態は色だけに依存しない）。
- 最小タップ領域44px相当を確保。

## 12. パフォーマンス／操作感
- 初回表示は体感1秒以内を目標。
- タスク1,000件程度まで快適に操作可能。
- 並び替え／フィルタ適用は即時反映（0.2秒以内を目安）。

## 13. 端末内保存に関する要件・制約
- データはユーザー端末内に自動保存／復元される。
- シークレット/プライベートブラウズやストレージクリア時はデータが失われる可能性がある旨を明示。
- ブラウザごと／端末ごとにデータは独立（同期しない）。
- 保存容量上限に接近した場合は警告表示（件数や容量の目安を提示）。

## 14. セキュリティ／プライバシー
- 外部送信なし（ネットワーク不要で利用可）。
- 個人情報や秘匿情報の入力はユーザー責任であることを明示。

## 15. ログ／監査（端末内）
- 重要操作（追加・削除・一括操作）は端末内で履歴を保持（Could）。
- 履歴はユーザーが消去可能（全消去）。

## 16. 品質要件（型安全・テスト）
- **静的型チェック**を導入し、ビルド時の型エラーは0件でリリース可とする。
- **自動テスト**を用意し、**テストカバレッジ90%以上**を満たすこと。
  - 単体テスト: 入力バリデーション、並び替え／絞り込みロジック、ステータス遷移。
  - 結合テスト: タスク追加→表示→編集→削除の一連の流れ。
  - E2Eに相当する観点: 主要ユーザーストーリー（8件以上）に対する受け入れテスト。
- 主要機能ごとに**受け入れ基準**（下記）を満たすこと。

## 17. 受け入れ基準（例）
**タスク追加**
- [Given] 入力パネルでタイトルに50文字、優先度=4、期限に本日、カテゴリ=「仕事」を入力
- [When] 追加を実行
- [Then] 一覧先頭に新タスクが表示され、優先度・期限・カテゴリが正しく反映

**並び替え（期限昇順）**
- [Given] 期限が昨日・今日・明日の3件が存在
- [When] 期限昇順でソート
- [Then] 昨日→今日→明日の順で表示

**絞り込み（期限超過）**
- [Given] 期限超過タスク1件と未超過2件
- [When] 期限超過フィルタを適用
- [Then] 一覧には超過1件のみが表示

**一括完了**（Should）
- [Given] 未完了タスク3件を選択
- [When] 一括完了を実行
- [Then] 3件すべてが完了ステータスとなり、カウントに反映

**設定保持**（Should）
- [Given] カテゴリ=「学習」、ソート=優先度降順を設定
- [When] ページを再読み込み
- [Then] 同じ条件が再現

## 18. 非機能要件
- **信頼性**: 異常終了後もデータが端末内に残存し復元される。
- **可用性**: オフライン時も主要機能が利用可能。
- **保守性**: 要件変更（フィルタ条件追加等）がUI文言変更で完結しやすい設計指針。
- **互換性**: 主要モダンブラウザの最新版で動作（PC/スマホ）。
- **国際化**: 文言は日本語を既定。英語化は今回対象外。

## 19. 成果物と完了条件（Definition of Done）
- 本要件の**Must**を満たす実装が完了し、**Should**のうち最低3項目以上が実装。
- 自動テストの**カバレッジ90%以上**を達成し、主要ユーザーストーリーの受け入れテストが合格。
- アクセシビリティの実地確認（キーボード操作／スクリーンリーダーの基本動作）済み。
- 既知の重大不具合（致命度High以上）が未解決でないこと。
- ユーザーマニュアル相当の簡易ヘルプ（操作説明）が画面内に存在。

## 20. リスクと前提
- 端末内保存であるため、**端末紛失・故障・ブラウザ初期化**によるデータ消失リスクがある。
- シークレットモードでは保存されない可能性がある。
- 保存容量の上限（ブラウザ依存）に達すると保存できない可能性がある。

## 21. ロードマップ（初期リリース想定）
1. v1.0: Must全実装、検索・設定保持（Should）、アクセシビリティ基本対応。
2. v1.x: 一括操作、印刷・エクスポート、カテゴリ色・順（Could）。

---

### 付録A: 主要UIコンポーネント一覧
- タスク入力フォーム、フィルタ／ソートバー、タスク一覧、カテゴリ管理、件数サマリ、確認ダイアログ。

### 付録B: エラーメッセージ例
- 「タイトルは必須です」
- 「優先度は1〜5で指定してください」
- 「期限の形式が正しくありません」
- 「選択したタスクを削除します。よろしいですか？」

---

> 本書は実装詳細を規定しません。具体的な設計・実装は別途「設計書」で定義します。

